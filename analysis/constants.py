from re import sub

regionToStatesString = {
    1: 'Connecticut, Maine, Massachusetts, New Hampshire, Rhode Island, Vermont',
    2: 'New Jersey, New York, Puerto Rico, Virgin Islands',
    3: 'Delaware, District of Columbia, Maryland, Pennsylvania, Virginia, West Virginia',
    4: 'Alabama, Florida, Georgia, Kentucky, Mississippi, North Carolina, South Carolina, Tennessee',
    5: 'Illinois, Indiana, Michigan, Minnesota, Ohio, Wisconsin',
    6: 'Arkansas, Louisiana, New Mexico, Oklahoma, Texas',
    7: 'Iowa, Kansas, Missouri, Nebraska',
    8: 'Colorado, Montana, North Dakota, South Dakota, Utah, Wyoming',
    9: 'Arizona, California, Hawaii, Nevada',
    10: 'Alaska, Idaho, Oregon, Washington',
}

regionToStates = {r: ss.split(', ') for (r, ss) in regionToStatesString.items()}

postalCodeToState = {
    'AL': 'Alabama',
    'AK': 'Alaska',
    'AS': 'American Samoa',
    'AZ': 'Arizona',
    'AR': 'Arkansas',
    'CA': 'California',
    'CO': 'Colorado',
    'CT': 'Connecticut',
    'DE': 'Delaware',
    'DC': 'District of Columbia',
    'FL': 'Florida',
    'GA': 'Georgia',
    'GU': 'Guam',
    'HI': 'Hawaii',
    'ID': 'Idaho',
    'IL': 'Illinois',
    'IN': 'Indiana',
    'IA': 'Iowa',
    'KS': 'Kansas',
    'KY': 'Kentucky',
    'LA': 'Louisiana',
    'ME': 'Maine',
    'MD': 'Maryland',
    'MH': 'Marshall Islands',
    'MA': 'Massachusetts',
    'MI': 'Michigan',
    'FM': 'Micronesia',
    'MN': 'Minnesota',
    'MS': 'Mississippi',
    'MO': 'Missouri',
    'MT': 'Montana',
    'NE': 'Nebraska',
    'NV': 'Nevada',
    'NH': 'New Hampshire',
    'NJ': 'New Jersey',
    'NM': 'New Mexico',
    'NY': 'New York',
    'NC': 'North Carolina',
    'ND': 'North Dakota',
    'MP': 'Northern Marianas',
    'OH': 'Ohio',
    'OK': 'Oklahoma',
    'OR': 'Oregon',
    'PW': 'Palau',
    'PA': 'Pennsylvania',
    'PR': 'Puerto Rico',
    'RI': 'Rhode Island',
    'SC': 'South Carolina',
    'SD': 'South Dakota',
    'TN': 'Tennessee',
    'TX': 'Texas',
    'UT': 'Utah',
    'VT': 'Vermont',
    'VA': 'Virginia',
    'VI': 'Virgin Islands',
    'WA': 'Washington',
    'WV': 'West Virginia',
    'WI': 'Wisconsin',
    'WY': 'Wyoming',
}

date2Week = {
    '8/10/2013': 2013.32,
    '8/17/2013': 2013.33,
    '8/24/2013': 2013.34,
    '8/31/2013': 2013.35,
    '9/7/2013': 2013.36,
    '9/14/2013': 2013.37,
    '9/21/2013': 2013.38,
    '9/28/2013': 2013.39,
    '10/5/2013': 2013.40,
    '10/12/2013': 2013.41,
    '10/19/2013': 2013.42,
    '10/26/2013': 2013.43,
    '11/2/2013': 2013.44,
    '11/9/2013': 2013.45,
    '11/16/2013': 2013.46,
    '11/23/2013': 2013.47,
    '11/30/2013': 2013.48,
    '12/7/2013': 2013.49,
    '12/14/2013': 2013.50,
    '12/21/2013': 2013.51,
    '12/28/2013': 2013.52,
    '1/4/2014': 2014.01,
    '1/11/2014': 2014.02,
    '1/18/2014': 2014.03,
    '1/25/2014': 2014.04,
    '2/1/2014': 2014.05,
    '2/8/2014': 2014.06,
    '2/15/2014': 2014.07,
    '2/22/2014': 2014.08,
    '3/1/2014': 2014.09,
    '3/8/2014': 2014.10,
    '3/15/2014': 2014.11,
    '3/22/2014': 2014.12,
    '3/29/2014': 2014.13,
    '4/5/2014': 2014.14,
    '4/12/2014': 2014.15,
    '4/19/2014': 2014.16,
    '4/26/2014': 2014.17,
    '5/3/2014': 2014.18,
    '5/10/2014': 2014.19,
    '5/17/2014': 2014.20,
    '5/24/2014': 2014.21,
    '5/31/2014': 2014.22,
    '6/7/2014': 2014.23,
    '6/14/2014': 2014.24,
    '6/21/2014': 2014.25,
    '6/28/2014': 2014.26,
    '7/5/2014': 2014.27,
    '7/12/2014': 2014.28,
    '7/19/2014': 2014.29,
    '7/26/2014': 2014.30,
    '8/2/2014': 2014.31,
    '8/9/2014': 2014.32,
    '8/16/2014': 2014.33,
    '8/23/2014': 2014.34,
    '8/30/2014': 2014.35,
    '9/6/2014': 2014.36,
    '9/13/2014': 2014.37,
    '9/20/2014': 2014.38,
    '9/27/2014': 2014.39,
    '10/4/2014': 2014.40,
    '10/11/2014': 2014.41,
    '10/18/2014': 2014.42,
    '10/25/2014': 2014.43,
    '11/1/2014': 2014.44,
    '11/8/2014': 2014.45,
    '11/15/2014': 2014.46,
    '11/22/2014': 2014.47,
    '11/29/2014': 2014.48,
    '12/6/2014': 2014.49,
    '12/13/2014': 2014.50,
    '12/20/2014': 2014.51,
    '12/27/2014': 2014.52,
    '1/3/2015': 2014.53,
    '1/10/2015': 2015.01,
    '1/17/2015': 2015.02,
    '1/24/2015': 2015.03,
    '1/31/2015': 2015.04,
    '2/7/2015': 2015.05,
    '2/14/2015': 2015.06,
    '2/21/2015': 2015.07,
    '2/28/2015': 2015.08,
    '3/7/2015': 2015.09,
    '3/14/2015': 2015.10,
    '3/21/2015': 2015.11,
    '3/28/2015': 2015.12,
    '4/4/2015': 2015.13,
    '4/11/2015': 2015.14,
    '4/18/2015': 2015.15,
    '4/25/2015': 2015.16,
    '5/2/2015': 2015.17,
    '5/9/2015': 2015.18,
    '5/16/2015': 2015.19,
    '5/23/2015': 2015.20,
    '5/30/2015': 2015.21,
    '6/6/2015': 2015.22,
    '6/13/2015': 2015.23,
    '6/20/2015': 2015.24,
    '6/27/2015': 2015.25,
    '7/4/2015': 2015.26,
    '7/11/2015': 2015.27,
    '7/18/2015': 2015.28,
    '7/25/2015': 2015.29,
}

def dateToWeek(datestr):
    return date2Week[sub('/0','/',datestr).lstrip('0')]

stateToPostalCode = {v: k for (k, v) in postalCodeToState.items()}
regionToPostalCodes = {r: map(stateToPostalCode.get, ss) for (r, ss) in regionToStates.items()}
postalCodeToRegion = {}
for (r, pcs) in regionToPostalCodes.items():
    for pc in pcs:
        postalCodeToRegion[pc] = r


